{% extends "base.html" %}

{% block lab %}–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 7 (—Å –ë–î){% endblock %}

{% block script %}
<script src="{{ url_for('static', filename='lab7/main.js') }}"></script>
<style>
    
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ë–î */
    .stats-panel {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        border-left: 4px solid #667eea;
        font-size: 14px;
    }
    
    .char-counter {
        font-size: 12px;
        margin-top: 5px;
        font-weight: 500;
    }
    
    .db-info {
        background-color: #e8f4fd;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 12px;
        color: #2c3e50;
        margin-top: 10px;
        border: 1px solid #b8daff;
    }
    
    .validation-hint {
        font-size: 11px;
        color: #7f8c8d;
        margin-top: 3px;
    }
    
    .year-range {
        font-size: 12px;
        color: #666;
        margin-top: 5px;
    }
</style>
{% endblock %}

{% block main %}
<h1>üé¨ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞–º–∏ (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)</h1>

<div class="stats-panel" id="stats">
    <strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</strong> –ó–∞–≥—Ä—É–∑–∫–∞...
</div>

<div class="db-info">
    üíæ <strong>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö</strong> | –§–∏–ª—å–º—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
</div>

<button class="add-btn" onclick="addFilm()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∏–ª—å–º</button>

<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>–†—É—Å—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–ì–æ–¥</th>
            <th>–î–ª–∏–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è</th>
            <th>–î–æ–±–∞–≤–ª–µ–Ω</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody id="film-list"></tbody>
</table>

<div id="filmModal" class="modal">
    <div class="modal-content">
        <h2 id="modalTitle">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞</h2>
        <input type="hidden" id="id">
        
        <div class="validation-hint">–ü–æ–ª—è, –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ *, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è</div>
        
        <label>
            –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º: *
            <input type="text" id="title_ru" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ä—É—Å—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–º–∞–∫—Å. 200 —Å–∏–º–≤–æ–ª–æ–≤)">
            <div id="title_ru_error" class="error-message"></div>
        </label>
        
        <label>
            –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —è–∑—ã–∫–µ:
            <input type="text" id="title" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–º–∞–∫—Å. 200 —Å–∏–º–≤–æ–ª–æ–≤)">
            <div class="validation-hint">–ï—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ä—É—Å—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</div>
            <div id="title_error" class="error-message"></div>
        </label>
        
        <label>
            –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞: *
            <input type="number" id="year" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1994" min="1895" max="2025">
            <div class="year-range">–î–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω: 1895‚Äì2025</div>
            <div id="year_error" class="error-message"></div>
        </label>
        
        <label>
            –û–ø–∏—Å–∞–Ω–∏–µ: *
            <textarea id="description" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ (10-2000 —Å–∏–º–≤–æ–ª–æ–≤)" 
                      rows="5" oninput="updateCharCounter()"></textarea>
            <div id="description_error" class="error-message"></div>
        </label>
        
        <div class="modal-buttons">
            <button class="modal-ok" onclick="sendFilm()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button class="modal-cancel" onclick="cancel()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</div>

<script>
    fillFilmList();
</script>
{% endblock %}